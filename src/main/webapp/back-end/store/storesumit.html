<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>StoreSumit</title>

<link rel="stylesheet" href="../../css/header.css" />
<link 
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
	crossorigin="anonymous" />
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
	crossorigin="anonymous"></script>

    <style>
        div.col-6{
            margin-bottom: 15px;
        }
    </style>

</head>
<body  style="background-color: rgb(216, 208, 208)">
    <div id="xxx"></div>

   
    <div class="container">
        <div class="row align-items-center justify-content-center ">
            <div class="col-6">
                <h1>商家註冊</h1>
            </div>
        </div>
        <div class="row align-items-center justify-content-center ">
            <div class="col-6">
                <input type="text" class="form-control" id="account" placeholder="帳號">
                <span id="accounterror" style="color: red;"></span> <span id="accountsuccess" style="color:green ;"></span>
            </div>
        </div>
        <div class="row align-items-center justify-content-center">
            <div class="col-6">
                <input type="password" class="form-control" placeholder="密碼">
            </div>
        </div>
        <div class="row align-items-center justify-content-center">
            <div class="col-6">
                <input type="text" class="form-control" placeholder="店家名稱">
            </div>
        </div>
        <div class="row align-items-center justify-content-center">
            <div class="col-6">
                <input type="text" class="form-control" placeholder="電話">
            </div>
        </div>
        <div class="row align-items-center justify-content-center">
            <div class="col-6">
                <input type="email" class="form-control" placeholder="Email">
            </div>
        </div>
        <div class="row align-items-center justify-content-center">
            <div class="col-6">
                <input class=" form-control js-demeter-tw-zipcode-selector" data-city="#city" data-dist="#dist" placeholder="請輸入郵遞區號" style="width: 150px; display: inline-block;"/>
                 <select id="city" placeholder="請選擇縣市" name="city" class="form-select" style="width: 150px; display: inline-block;"></select>
				<select id="dist" placeholder="請選擇鄉鎮區" name="dist" class="form-select" style="width: 150px; display: inline-block;"></select>
				<input type="text" id="register_addr" class="form-control register_control" name="address" placeholder="請輸入地址
                "/>
            </div>
        </div>
        <div class="row align-items-center justify-content-center">
            <div class="col-6">
                <select id="storeType" name="theme_id" class="form-select" >
                    <option value="1">Bistro</option>
                    <option value="2">Cocktail Bar</option>
                    <option value="3">Whisky Bar</option>
                  </select>
            </div>
        </div>

        <div class="row align-items-center justify-content-center">
            <div class="col-6">
                <button type="button" class="btn btn-secondary" id="sumit">Secondary</button>
            </div>
        </div>
       
    </div>
</body>


<script src="https://code.jquery.com/jquery-3.6.1.js"
		integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
		crossorigin="anonymous"></script>
	<script src="https://demeter.5fpro.com/tw/zipcode-selector.js"></script>
<script>
   
    function includeHTML() {
         const xxx = document.querySelector("#xxx");
         fetch("/TGA103G1/com/header.html")
           .then((resp) => resp.text())
           .then((content) => {
             xxx.innerHTML = content;
             changelog();
             logout();
             changeTheme()
             const username = document.querySelector("#account");
             const password = document.querySelector("#password");
             const errMsg = document.querySelector("#errMsg");
             document.getElementById("btn1").addEventListener("click", () => {
               fetch("/TGA103G1/StoreLogin", {
                 method: "POST",
                 headers: { "Content-Type": "application/json" },
                 body: JSON.stringify({
                   account: username.value,
                   password: password.value,
                 }),
               })
                 .then((resp) => resp.json())
                 .then((body) => {
                   errMsg.textContent = "";
                   const { successful, message } = body;
                   if (successful) {
                     const { account, password } = body;
                     sessionStorage.setItem("account", account);
                     sessionStorage.setItem("password", password);
                     location = "/TGA103G1/ShowProduct";
                   } else {
                     errMsg.textContent = message;
                   }
                 });
             });
           });
       }
       includeHTML();
 
   
 //登出鈕
 function changelog(){
             
             if(sessionStorage.getItem("account")){
             document.querySelector("#login").style.display='none'
             document.querySelector("#logout").style.display='block'
             document.querySelector("#loginbox").style.display = "none";
             document.querySelector("#normal").style.display = "block";
           }
         }
 
 //登出
       function logout(){
         document.querySelector("#logout").addEventListener("click", function(){
             sessionStorage.removeItem("account")
           })
       }
     //點擊theme_id
     function changeTheme(){
 let allthemeid =  document.querySelectorAll(".theme_id");
 allthemeid.forEach(function(e){
   e.addEventListener("click", function(e){
         let id = e.target.getAttribute("data-themid");
         sessionStorage.setItem("themeId",id)
   })
 })
 }
 
let account = document.querySelector("#account")
let accountsuccess = document.querySelector("#accountsuccess")
let accounterror = document.querySelector("#accounterror")
 //驗證帳號
 document.querySelector("#account").addEventListener("blur", function(){
   if(  account.value.length < 5){
             accountsuccess.innerText = ""
            accounterror.innerText = ""
            accounterror.innerText = "請輸入超過5碼"
   }else{
    fetch('/TGA103G1/VerifyAccount', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        account:account.value
      }),
    })
      .then(resp => resp.json() )
      .then(body => {
        const{successful , message} = body
        if(successful){
            accountsuccess.innerText = ""
            accounterror.innerText = ""
            accountsuccess.innerText = message
        }else{
            accountsuccess.innerText = ""
            accounterror.innerText = ""
            accounterror.innerText = message
        }
      });
    }
 });
 
     </script>
</html>